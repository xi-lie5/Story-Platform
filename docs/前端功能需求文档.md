# StoryForge 前端功能需求文档

## 1. 项目概述

### 1.1 项目名称
StoryForge - AI交互式故事生成平台

### 1.2 项目定位
StoryForge是一个基于AI技术的交互式故事创作与阅读平台，允许用户创建、编辑、发布和阅读具有多分支结局的互动故事。

### 1.3 核心价值
- **AI辅助创作**：利用AI技术辅助用户进行故事创作
- **多分支叙事**：支持创建具有多个选择分支和结局的互动故事
- **社区分享**：用户可以发布作品供其他用户阅读和体验
- **可视化编辑**：提供直观的故事节点图谱编辑工具

## 2. 用户角色

### 2.1 普通用户
- 浏览和阅读已发布的故事
- 注册账号并登录
- 创建和管理自己的故事作品
- 查看个人统计信息

### 2.2 管理员
- 审核用户提交的故事
- 管理系统用户
- 管理故事分类
- 查看系统统计数据

## 3. 功能模块详细需求

### 3.1 用户认证模块

#### 3.1.1 用户注册
**页面**：`register.html`

**功能需求**：
- 用户填写注册表单（用户名、邮箱、密码、确认密码）
- 密码强度验证（至少8位，包含字母和数字）
- 同意服务条款和隐私政策
- 支持第三方注册（微信、QQ、微博）- 预留接口
- 注册成功后跳转到登录页面

**表单字段**：
- 用户名（必填）
- 电子邮箱（必填，邮箱格式验证）
- 密码（必填，至少8位，包含字母和数字）
- 确认密码（必填，需与密码一致）
- 同意条款复选框（必选）

#### 3.1.2 用户登录
**页面**：`login.html`

**功能需求**：
- 用户使用邮箱和密码登录
- 支持"记住我"功能（使用localStorage或sessionStorage）
- 忘记密码链接跳转
- 支持第三方登录（微信、QQ、微博）- 预留接口
- 登录成功后根据redirect参数跳转或跳转到首页
- 未登录用户访问需要登录的页面时显示登录提示

**表单字段**：
- 电子邮箱（必填）
- 密码（必填）
- 记住我复选框（可选）

#### 3.1.3 忘记密码
**页面**：`forgot_password.html`

**功能需求**：
- 用户输入邮箱地址
- 发送密码重置邮件
- 显示发送成功提示

### 3.2 首页模块

#### 3.2.1 首页展示
**页面**：`index.html`

**功能需求**：
- 展示平台核心价值主张
- 显示平台特色功能（AI协作、多结局分支、场景可视化等）
- 展示创作流程说明（三步创建故事）
- 显示创作者统计数据（10,000+创作者）
- "开始创作"按钮（未登录时提示登录）
- 导航栏显示登录状态（已登录显示用户信息，未登录显示登录/注册按钮）

**核心元素**：
- 英雄区域（Hero Section）：主标题、副标题、CTA按钮
- 特色功能卡片（6个功能点）
- 创作流程说明（3个步骤）
- 响应式设计（支持桌面端和移动端）

### 3.3 故事浏览模块

#### 3.3.1 故事列表页
**页面**：`browse.html`

**功能需求**：
- 显示所有已审核通过的故事
- 支持搜索功能（按标题或关键词）
- 支持分类筛选
- 支持排序（最新发布、最受欢迎、评分最高）
- 分页显示（每页12个故事）
- 故事卡片显示：封面图、标题、描述、分类、作者、浏览次数、评分、发布日期
- 点击故事卡片跳转到阅读页面

**筛选功能**：
- 搜索框（实时搜索）
- 分类下拉选择
- 排序下拉选择
- 筛选按钮应用筛选条件

**故事卡片信息**：
- 封面图片
- 分类标签
- 分支数量
- 标题
- 描述（最多2行）
- 作者头像和名称
- 浏览次数
- 评分
- 发布日期
- "阅读"按钮

### 3.4 故事阅读模块

#### 3.4.1 故事阅读器
**页面**：`story-reader.html`

**功能需求**：
- 根据URL参数（id和node）加载故事和节点内容
- 显示故事标题和当前节点信息
- 显示节点内容（支持富文本）
- 显示分支选择按钮（如果有）
- 支持返回上一节点
- 显示阅读进度条
- 显示阅读路径指示器
- 支持字体大小调整（小、中、大）
- 支持主题切换（浅色/深色）
- 支持书签功能
- 支持分享功能
- 支持重新开始阅读
- 浏览器前进/后退支持

**阅读功能**：
- 节点内容渲染
- 选择分支跳转
- 阅读历史记录
- 进度追踪
- 阅读体验优化（字体、主题）

### 3.5 故事创作模块

#### 3.5.1 故事创建工具
**页面**：`create.html`

**功能需求**：
- 左侧面板：故事信息设置、角色管理
- 中间面板：分支管理（节点图谱编辑）
- 右侧面板：实时预览
- 顶部工具栏：保存、导出、切换预览

**故事信息设置**：
- 故事标题（必填，最多50字符）
- 故事简介（必填，最多500字符）
- 封面图片上传和预览

**角色管理**：
- 添加角色
- 编辑角色
- 删除角色
- 角色信息：名称、描述

**分支管理**：
- 可视化节点图谱
- 添加分支
- 编辑分支属性
- 节点编辑（标题、内容、类型）
- 分支连接管理

**实时预览**：
- 预览故事内容
- 预览分支选择

### 3.6 作品管理模块

#### 3.6.1 我的作品页
**页面**：`my_stories.html`

**功能需求**：
- 显示用户创建的所有故事
- 支持状态筛选（全部、草稿、待审核、已发布、已拒绝、下架作品）
- 区分已完成和未完成作品
- 故事卡片显示：标题、描述、分类、状态、更新时间
- 操作按钮：继续编辑、查看、提交审核、取消发布、重新提交、分享、统计

**故事状态**：
- 草稿（draft）：未提交审核
- 待审核（pending）：已提交，等待管理员审核
- 已发布（published）：审核通过，已发布
- 已拒绝（rejected）：审核未通过
- 已下架（unpublished）：曾经发布但被下架

**功能操作**：
- 继续编辑：跳转到故事编辑页面
- 查看：查看故事节点图谱
- 提交审核：将草稿提交审核
- 取消发布：取消已发布的故事
- 重新提交：重新提交被拒绝或下架的故事
- 分享：分享故事链接
- 统计：查看故事统计数据

**筛选功能**：
- 全部作品
- 草稿
- 待审核
- 已发布
- 已拒绝
- 下架作品

### 3.7 个人中心模块

#### 3.7.1 个人资料页
**页面**：`profile.html`

**功能需求**：
- 标签页切换（个人资料、创作统计、管理中心-仅管理员）

**个人资料标签页**：
- 用户头像显示
- 用户基本信息（昵称、邮箱、用户ID、登录状态）
- 快捷操作按钮（开始新的故事、进入管理员控制台-仅管理员、退出登录）

**创作统计标签页**：
- 已发布故事数量
- 创作中（草稿）数量
- 收藏故事数量

**管理中心标签页**（仅管理员）：
- 系统概览统计（总作品数、待审核、用户总数、分类总数）
- 快速操作（查看待审核作品、查看已发布作品、查看所有作品、查看所有用户、管理分类、打开完整管理面板）
- 数据显示区域（作品列表、用户列表、分类管理）

**分类管理功能**（管理员）：
- 查看所有分类
- 添加分类
- 编辑分类
- 删除分类
- 分类信息：名称、描述、故事数量、创建日期

### 3.8 管理员模块

#### 3.8.1 管理员控制台
**页面**：`admin.html`

**功能需求**：
- 标签页导航（数据总览、作品管理、用户管理）

**数据总览标签页**：
- 统计卡片（故事总数、待审核故事、用户总数）
- 系统概览信息

**作品管理标签页**：
- 状态筛选（全部、待审核、已发布、草稿、已拒绝）
- 故事列表显示
- 故事操作（审核、发布、拒绝、下架）
- 故事信息显示（标题、作者、状态、创建时间）

**用户管理标签页**：
- 用户列表显示
- 用户信息（用户名、邮箱、角色、状态）
- 用户操作（激活/禁用、删除）

## 4. 通用功能需求

### 4.1 导航栏
**所有页面通用**

**功能需求**：
- Logo和平台名称
- 主导航链接（首页、故事阅览、创建故事、我的作品、个人中心）
- 认证状态显示（已登录显示用户信息，未登录显示登录/注册按钮）
- 移动端响应式菜单
- 当前页面高亮显示

**导航链接**：
- 首页（index.html）
- 故事阅览（browse.html）
- 创建故事（create.html）
- 我的作品（my_stories.html）
- 个人中心（profile.html）

### 4.2 认证状态管理
**所有页面通用**

**功能需求**：
- 统一的认证状态检查（AuthUI）
- 支持localStorage和sessionStorage
- 自动刷新token
- 登录状态变化事件监听
- 未登录用户访问受限页面时提示登录

### 4.3 响应式设计
**所有页面通用**

**功能需求**：
- 支持桌面端（≥1024px）
- 支持平板端（768px-1023px）
- 支持移动端（<768px）
- 移动端菜单折叠
- 响应式布局调整

### 4.4 通知提示
**所有页面通用**

**功能需求**：
- 成功提示（绿色）
- 错误提示（红色）
- 信息提示（蓝色）
- 警告提示（黄色）
- 自动消失（3秒）
- 动画效果

### 4.5 加载状态
**所有页面通用**

**功能需求**：
- 加载中动画
- 加载失败提示
- 重试功能
- 空状态显示

## 5. 技术需求

### 5.1 前端技术栈
- HTML5
- CSS3（Tailwind CSS）
- JavaScript (ES6+)
- Font Awesome图标库
- TinyMCE富文本编辑器（节点编辑）

### 5.2 API集成
- RESTful API调用
- JWT Token认证
- 错误处理
- 请求拦截和响应处理

### 5.3 数据存储
- localStorage（持久化存储，记住登录）
- sessionStorage（会话存储）
- 认证信息存储
- 用户偏好设置存储

### 5.4 浏览器兼容性
- Chrome（最新版本）
- Firefox（最新版本）
- Safari（最新版本）
- Edge（最新版本）
- 移动端浏览器

## 6. 用户体验需求

### 6.1 界面设计
- 现代化设计风格
- 渐变背景和玻璃态效果
- 流畅的动画过渡
- 清晰的视觉层次
- 一致的色彩方案（主色：#6366f1，辅助色：#ec4899）

### 6.2 交互设计
- 悬停效果
- 点击反馈
- 加载状态提示
- 错误提示
- 成功确认

### 6.3 性能要求
- 页面加载时间 < 3秒
- 图片懒加载
- 内容分页加载
- 防抖和节流处理

### 6.4 可访问性
- 语义化HTML
- 键盘导航支持
- 屏幕阅读器支持
- 颜色对比度符合WCAG标准

## 7. 安全需求

### 7.1 认证安全
- JWT Token认证
- Token过期处理
- 自动刷新Token
- 登录状态验证

### 7.2 数据安全
- 敏感信息不存储在客户端
- XSS防护
- CSRF防护
- 输入验证和清理

## 8. 待实现功能（预留）

### 8.1 第三方登录
- 微信登录
- QQ登录
- 微博登录

### 8.2 高级功能
- 故事导出（PDF、EPUB等格式）
- 故事模板
- AI续写功能
- 协作编辑
- 故事评论和评分
- 用户关注和粉丝系统

## 9. 页面清单

| 页面名称 | 文件路径 | 主要功能 |
|---------|---------|---------|
| 首页 | index.html | 平台介绍、功能展示 |
| 故事阅览 | browse.html | 故事列表、搜索、筛选、分页 |
| 故事阅读器 | story-reader.html | 阅读故事、分支选择、阅读设置 |
| 创建故事 | create.html | 故事创建工具、节点编辑 |
| 我的作品 | my_stories.html | 作品管理、状态筛选、操作 |
| 个人中心 | profile.html | 个人资料、统计、管理功能 |
| 登录 | login.html | 用户登录 |
| 注册 | register.html | 用户注册 |
| 忘记密码 | forgot_password.html | 密码重置 |
| 管理员控制台 | admin.html | 系统管理、审核、用户管理 |

## 10. 总结

StoryForge是一个功能完整的AI交互式故事创作平台，涵盖了用户认证、故事创作、故事阅读、作品管理、个人中心和管理后台等核心功能模块。平台采用现代化的前端技术栈，提供流畅的用户体验和直观的操作界面，支持多分支互动故事的创建和阅读。

